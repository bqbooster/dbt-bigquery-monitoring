version: 2

models:
  - name: jobs_costs_incremental
    description: ""
    columns:
      - name: hour
        data_type: timestamp
        description: The hour of the compute cost.

      - name: query
        data_type: string
        description: The SQL query text.

      - name: jobs
        data_type: record
        description: Array of individual jobs for this hour and query.

      - name: jobs.project_id
        data_type: string
        description: The ID of the project where the job was run.
      - name: jobs.reservation_id
        data_type: string
        description: The ID of the reservation assigned to the job.
      - name: jobs.job_id
        data_type: string
        description: The unique ID of the job.
      - name: jobs.user_email
        data_type: string
        description: The email of the user who ran the job.
      - name: jobs.cache_hit
        data_type: boolean
        description: Whether the job was a cache hit.
      - name: jobs.query_cost
        data_type: float64
        description: The estimated cost of the query.
      - name: jobs.total_slot_ms
        data_type: int64
        description: The total slot time used by the job in milliseconds.
      - name: jobs.total_time_seconds
        data_type: float64
        description: The total execution time of the job in seconds.
      - name: jobs.job_type
        data_type: string
        description: The type of job (e.g., QUERY).
      - name: jobs.statement_type
        data_type: string
        description: The type of statement (e.g., SELECT, INSERT).
      - name: jobs.priority
        data_type: string
        description: The priority of the job (INTERACTIVE or BATCH).
      - name: jobs.total_bytes_processed
        data_type: int64
        description: Total bytes processed by the job.
      - name: jobs.total_bytes_billed
        data_type: int64
        description: Total bytes billed for the job.
      - name: jobs.error_result
        data_type: record
        description: Error details if the job failed.
      - name: jobs.bi_engine_mode
        data_type: string
        description: The BI Engine execution mode.
      - name: jobs.rank_cost
        data_type: int64
        description: The rank of the job by cost within the hour.
      - name: jobs.rank_duration
        data_type: int64
        description: The rank of the job by duration within the hour.
      - name: jobs.rank_slot_usage
        data_type: int64
        description: The rank of the job by slot usage within the hour.

      - name: cache_hit
        data_type: int64
        description: "Number of cache hits for this hour/query."

      - name: total_query_cost
        data_type: float64
        description: The total cost of all queries run during the hour for this specific query.

      - name: total_slot_ms
        data_type: int64
        description: The total number of slot time milliseconds used.

      - name: query_count
        data_type: int64
        description: The total number of queries run.

      - name: failed_jobs
        data_type: int64
        description: Total number of failed jobs.

      - name: total_bytes_processed
        data_type: int64
        description: Total bytes processed.

      - name: total_bytes_billed
        data_type: int64
        description: Total bytes billed.

      - name: projects_count
        data_type: int64
        description: Number of distinct projects.

      - name: users_count
        data_type: int64
        description: Number of distinct users.

      - name: avg_duration_seconds
        data_type: float64
        description: Average duration in seconds.


